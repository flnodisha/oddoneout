<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Odd One Out Game</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/lucide.umd.js"></script>
    <style>
    /* Previous styles remain the same */
    * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        }

        body {
            background-color: #f5f5f5;
            min-height: 100vh;
        }

        .header {
            background: white;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #333;
        }

        .settings-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
        }

        .game-container {
            max-width: 600px;
            margin: 2rem auto;
            padding: 1rem;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-bottom: 1rem;
        }

        @media (min-width: 768px) {
            .grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .card {
            aspect-ratio: 1;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: transform 0.2s;
            border: 2px solid transparent;
            overflow: hidden;
            position: relative;
        }

        .card:hover {
            transform: scale(1.02);
        }

        .card.selected {
            border-color: #3b82f6;
        }

        .card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .settings-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: none;
            justify-content: center;
            align-items: center;
            padding: 1rem;
            z-index: 1000;
        }

        .settings-modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 1.5rem;
            border-radius: 0.5rem;
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .close-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
        }

        .tab-buttons {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .tab-btn {
            padding: 0.5rem 1rem;
            border: none;
            background: #f3f4f6;
            border-radius: 0.25rem;
            cursor: pointer;
        }

        .tab-btn.active {
            background: #3b82f6;
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .color-picker {
            width: 100%;
            padding: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .image-upload {
            width: 100%;
            padding: 0.5rem;
            margin-bottom: 0.5rem;
            border: 2px dashed #ccc;
            border-radius: 0.25rem;
            text-align: center;
        }

        .btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 0.25rem;
            background: #3b82f6;
            color: white;
            cursor: pointer;
            width: 100%;
            margin-top: 1rem;
        }

        .btn:hover {
            background: #2563eb;
        }

        .feedback {
            text-align: center;
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 0.5rem;
            display: none;
        }

        .feedback.correct {
            background: #d1fae5;
            color: #065f46;
        }

        .feedback.incorrect {
            background: #fee2e2;
            color: #991b1b;
        }

        .icon-wrapper {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
        }
    </style>
</head>
<body>
    <header class="header">
        <h1 class="title">Odd One Out</h1>
        <button class="settings-btn" onclick="toggleSettings()">
            <div class="icon-wrapper">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/>
                    <circle cx="12" cy="12" r="3"/>
                </svg>
            </div>
        </button>
    </header>

    <main class="game-container">
        <div class="grid" id="gameGrid"></div>
        <div class="feedback" id="feedback"></div>
    </main>

    <div class="settings-modal" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Settings</h2>
                <button class="close-btn" onclick="toggleSettings()">
                    <div class="icon-wrapper">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M18 6 6 18"/>
                            <path d="m6 6 12 12"/>
                        </svg>
                    </div>
                </button>
            </div>
            <div class="tab-buttons">
                <button class="tab-btn active" onclick="switchTab('colors')">Colors</button>
                <button class="tab-btn" onclick="switchTab('images')">Images</button>
            </div>
            <div class="tab-content active" id="colorsTab">
                <h3>Set Colors</h3>
                <input type="color" class="color-picker" value="#ff0000" id="mainColor">
                <label>Main Color</label>
                <input type="color" class="color-picker" value="#00ff00" id="oddColor">
                <label>Odd Color</label>
                <button class="btn" onclick="applyColors()">Apply Colors</button>
            </div>
            <div class="tab-content" id="imagesTab">
                <h3>Upload Images</h3>
                <div class="image-upload" id="imageUpload">
                    <p>Drop images here or click to upload</p>
                    <input type="file" multiple accept="image/*" onchange="handleImageUpload(event)">
                </div>
                <button class="btn" onclick="applyImages()">Apply Images</button>
            </div>
        </div>
    </div>

    <script>
        // Game state
        let gameMode = 'colors';
        let images = [];
        let selectedCard = null;

        // Initialize game with colors
        function initGame() {
            const grid = document.getElementById('gameGrid');
            grid.innerHTML = '';
            
            if (gameMode === 'colors') {
                const mainColor = document.getElementById('mainColor').value;
                const oddColor = document.getElementById('oddColor').value;
                
                // Create 4 cards, one with odd color
                const oddPosition = Math.floor(Math.random() * 4);
                
                for (let i = 0; i < 4; i++) {
                    const card = document.createElement('div');
                    card.className = 'card';
                    card.style.background = i === oddPosition ? oddColor : mainColor;
                    card.onclick = () => checkAnswer(i === oddPosition, card);
                    grid.appendChild(card);
                }
            } else {
                // Image mode implementation
                if (images.length >= 4) {
                    const oddPosition = Math.floor(Math.random() * 4);
                    
                    for (let i = 0; i < 4; i++) {
                        const card = document.createElement('div');
                        card.className = 'card';
                        const img = document.createElement('img');
                        img.src = URL.createObjectURL(i === oddPosition ? images[1] : images[0]);
                        card.appendChild(img);
                        card.onclick = () => checkAnswer(i === oddPosition, card);
                        grid.appendChild(card);
                    }
                }
            }
        }

        // Check if answer is correct
        function checkAnswer(isCorrect, card) {
            const feedback = document.getElementById('feedback');
            const cards = document.querySelectorAll('.card');
            
            cards.forEach(c => c.classList.remove('selected'));
            card.classList.add('selected');
            
            feedback.style.display = 'block';
            if (isCorrect) {
                feedback.textContent = 'Correct! Well done!';
                feedback.className = 'feedback correct';
            } else {
                feedback.textContent = 'Try again!';
                feedback.className = 'feedback incorrect';
            }
            
            setTimeout(() => {
                feedback.style.display = 'none';
                initGame();
            }, 1500);
        }

        // Toggle settings modal
        function toggleSettings() {
            const modal = document.getElementById('settingsModal');
            modal.classList.toggle('active');
        }

        // Switch between color and image tabs
        function switchTab(tab) {
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById(`${tab}Tab`).classList.add('active');
            document.querySelector(`[onclick="switchTab('${tab}')"]`).classList.add('active');
        }

        // Apply color settings
        function applyColors() {
            gameMode = 'colors';
            toggleSettings();
            initGame();
        }

        // Handle image uploads
        function handleImageUpload(event) {
            images = Array.from(event.target.files);
            if (images.length >= 2) {
                document.getElementById('imageUpload').style.borderColor = '#3b82f6';
            }
        }

        // Apply image settings
        function applyImages() {
            if (images.length >= 2) {
                gameMode = 'images';
                toggleSettings();
                initGame();
            } else {
                alert('Please upload at least 2 images');
            }
        }

        // Initialize game on load
        initGame();
    </script>
</body>
  </html>
